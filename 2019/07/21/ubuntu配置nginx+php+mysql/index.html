<!DOCTYPE html>
<html>

<head><meta name="generator" content="Hexo 3.9.0">
  
  <title>ubuntu or centos中配置nginx+php+mysql - Scorpio</title>
  <meta charset="UTF-8">
  <meta name="description" content="每个人都应该拥有自己的梦想">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  

  <link rel="shortcut icon" href="https://s2.ax1x.com/2019/08/27/m5XhWT.jpg" type="image/png">
  <meta name="description" content="在ubuntu18和centos7中配置nginx+php+mysql，最后连接mysql执行sql语句">
<meta name="keywords" content="Nginx">
<meta property="og:type" content="article">
<meta property="og:title" content="ubuntu or centos中配置nginx+php+mysql">
<meta property="og:url" content="https://www.Gsuhy.cn/2019/07/21/ubuntu配置nginx+php+mysql/index.html">
<meta property="og:site_name" content="Scorpio">
<meta property="og:description" content="在ubuntu18和centos7中配置nginx+php+mysql，最后连接mysql执行sql语句">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563694240222.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563694379467.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/123.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563697680398.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563697909206.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563636428367.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563636518782.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563636722292.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563636764228.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563637026692.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563639244129.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563861980178.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563866348837.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563866300571.png">
<meta property="og:updated_time" content="2019-08-27T08:52:23.777Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ubuntu or centos中配置nginx+php+mysql">
<meta name="twitter:description" content="在ubuntu18和centos7中配置nginx+php+mysql，最后连接mysql执行sql语句">
<meta name="twitter:image" content="https://www.gsuhy.cn/img/1563694240222.png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/css/mdui.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.15.8/styles/atom-one-dark.css">
   
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1038733_0xvrvpg9c0r.css">
  <link rel="stylesheet" href="/css/style.css?v=1566921627714">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(http://tva1.sinaimg.cn/large/007X8olVly1g6ebo1zs56j31df0u0tvf.jpg)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">menu</i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="Gsuhy" class="mdui-btn mdui-btn-icon"><img src="https://s2.ax1x.com/2019/08/27/m5XhWT.jpg"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Gsuhy">
            <img src="https://s2.ax1x.com/2019/08/27/m5XhWT.jpg" alt="Gsuhy">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>30</div>
        <div><span>标签</span>15</div>
        <div><span>分类</span>13</div>
    </div>
    <ul class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about.html" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/PY.html" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
    </ul>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">社交按钮</h3>
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://space.bilibili.com/20238211" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/mGsuhy" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章分类</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/CTF/">CTF</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/">JAVA</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JSP/">JSP</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Link/">Link</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Linux/">Linux</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Nginx/">Nginx</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/PHP/">PHP</a>
          <span class="category-list-count">4</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Python/">Python</a>
          <span class="category-list-count">11</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/SQL/">SQL</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/内网渗透/">内网渗透</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/前端/">前端</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/学习/">学习</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/生活/">生活</a>
          <span class="category-list-count">1</span>
        </li>

        
      </ul>

    </div>
  </div>


  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">标签云</h3>
    <div id="randomtagcloud" class="nexmoe-widget tagcloud">
      <a href="/tags/CTF/" style="font-size: 12.5px;">CTF</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Nginx/" style="font-size: 12.5px;">Nginx</a> <a href="/tags/PHP/" style="font-size: 17.5px;">PHP</a> <a href="/tags/WP/" style="font-size: 10px;">WP</a> <a href="/tags/jSP/" style="font-size: 10px;">jSP</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/scrapy/" style="font-size: 10px;">scrapy</a> <a href="/tags/sites/" style="font-size: 10px;">sites</a> <a href="/tags/sql/" style="font-size: 15px;">sql</a> <a href="/tags/内网渗透/" style="font-size: 10px;">内网渗透</a> <a href="/tags/生活/" style="font-size: 10px;">生活</a>
    </div>
    
  </div>

  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章归档</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li></ul>
    </div>
  </div>


  
</aside>
    <div class="nexmoe-copyright">
        &copy; 2019 Gsuhy
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a>
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <div class="nexmoe-post">
    <div class="nexmoe-post-cover"> 
        
        <img src="http://tva1.sinaimg.cn/large/007X8olVly1g6eboaeke9j31hc0nfgq0.jpg">
        
        <h1>ubuntu or centos中配置nginx+php+mysql</h1>
    </div>
  <div class="nexmoe-post-meta">
    <a><i class="nexmoefont icon-calendar-fill"></i>2019年07月21日</a>
    <a><i class="nexmoefont icon-areachart"></i>1.8k 字</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>大概 8 分钟</a>
    
      <a class="nexmoefont icon-appstore-fill -link" href="/categories/Nginx/">Nginx</a>
    
    
      <a class="nexmoefont icon-tag-fill -link" href="/tags/Nginx/">Nginx</a>
    
  </div>
  <article>
    <p>在ubuntu18和centos7中配置nginx+php+mysql，最后连接mysql执行sql语句<a id="more"></a></p>
<h1 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h1><p>linux+nginx+php-fpm+mysql<br>为什么选nginx，主要是为后面的nginx+lua的waf做准备<br>这里介绍两种方法配置环境</p>
<h2 id="一、docker"><a href="#一、docker" class="headerlink" title="一、docker"></a>一、docker</h2><p>docker真的非常方便了，个人推荐docker<br>我的是ubuntu18，直接一个命令就ok了<br><code>sudo apt install docker.io</code></p>
<h3 id="开启docker"><a href="#开启docker" class="headerlink" title="开启docker"></a>开启docker</h3><p>sudo systemctl start docker<br>sudo systemctl enable docker</p>
<h3 id="免sudo配置"><a href="#免sudo配置" class="headerlink" title="免sudo配置"></a>免sudo配置</h3><pre><code>sudo addgroup --system docker
sudo adduser $USER docker
newgrp docker</code></pre><h3 id="docker拉取nginx镜像"><a href="#docker拉取nginx镜像" class="headerlink" title="docker拉取nginx镜像"></a>docker拉取nginx镜像</h3><p><code>docker search nginx</code><br>我是直接拉取的官方的，不过可能有点慢，需要换一个源<br>然后直接<code>docker pull nginx</code></p>
<p>拉取完之后可以看看自己本地的docker镜像<img src="/img/1563694240222.png" alt="1563694240222"></p>
<p>然后就跑起来<code>docker run --name runoob-nginx-test -p 8081:80 -d nginx</code></p>
<ul>
<li>runoob-nginx-test是容器的名称</li>
<li>-d 是在后台运行</li>
<li>-p 是端口映射，这里就是把8081映射到80端口</li>
</ul>
<p>然后访问<code>127.0.0.1:8081</code>就行了</p>
<p><img src="/img/1563694379467.png" alt="1563694379467"></p>
<h3 id="安装php"><a href="#安装php" class="headerlink" title="安装php"></a>安装php</h3><p>一样的，还是直接拉取官方的php，不过这里带一个fpm</p>
<p><code>docker pull php:5.6-fpm</code></p>
<p><img src="/img/123.png" alt></p>
<h3 id="nginx-php部署"><a href="#nginx-php部署" class="headerlink" title="nginx+php部署"></a>nginx+php部署</h3><h4 id="启动php"><a href="#启动php" class="headerlink" title="启动php"></a>启动php</h4><p>docker run –name  myphp-fpm -v ~/nginx/www:/www  -d php:5.6-fpm`</p>
<ul>
<li>–name：将容器命名为myphp-fpm</li>
<li>-v：将主机项目中的www目录挂载到容器的/www</li>
</ul>
<h4 id="创建-nginx-conf-conf-d-目录"><a href="#创建-nginx-conf-conf-d-目录" class="headerlink" title="创建~/nginx/conf/conf.d 目录"></a>创建~/nginx/conf/conf.d 目录</h4><p><code>mkdir ~/nginx/conf/conf.d</code></p>
<p>在该目录下添加 <strong>~/nginx/conf/conf.d/runoob-test-php.conf</strong> 文件，内容如下：</p>
<pre><code>server {
    listen       80;
    server_name  localhost;

    location / {
        root   /usr/share/nginx/html;
        index  index.html index.htm index.php;
    }

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }

    location ~ \.php$ {
        fastcgi_pass   php:9000;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME  /www/$fastcgi_script_name;
        include        fastcgi_params;
    }
}</code></pre><h4 id="启动nginx"><a href="#启动nginx" class="headerlink" title="启动nginx"></a>启动nginx</h4><pre><code>docker run --name runoob-php-nginx -p 8083:80 -d \
    -v ~/nginx/www:/usr/share/nginx/html:ro \
    -v ~/nginx/conf/conf.d:/etc/nginx/conf.d:ro \
    --link myphp-fpm:php \
    nginx</code></pre><ul>
<li><strong>-p 8083:80</strong>: 端口映射，把 <strong>nginx</strong> 中的 80 映射到本地的 8083 端口。</li>
<li><strong>~/nginx/www</strong>: 是本地 html 文件的存储目录，/usr/share/nginx/html 是容器内 html 文件的存储目录。</li>
<li><strong>~/nginx/conf/conf.d</strong>: 是本地 nginx 配置文件的存储目录，/etc/nginx/conf.d 是容器内 nginx 配置文件的存储目录。</li>
<li><strong>–link myphp-fpm:php</strong>: 把 <strong>myphp-fpm</strong> 的网络并入 <strong>nginx</strong>，并通过修改 <strong>nginx</strong> 的 /etc/hosts，把域名 <strong>php</strong> 映射成 127.0.0.1，让 nginx 通过 php:9000 访问 php-fpm。</li>
</ul>
<p>然后就是在/www目录下创建一个php文件，里面放上phpinfo</p>
<p><img src="/img/1563697680398.png" alt="1563697680398"></p>
<p>这就部署成功！！！！</p>
<h3 id="部署mysql"><a href="#部署mysql" class="headerlink" title="部署mysql"></a>部署mysql</h3><p>其实大致上是一样的都是通过docker拉取，细节就不多说了，详情可以参考菜鸟上的教程<a href="https://www.runoob.com/docker/docker-install-mysql.html" target="_blank" rel="noopener">https://www.runoob.com/docker/docker-install-mysql.html</a></p>
<p>最后附上今天安装的所有docker<img src="/img/1563697909206.png" alt="1563697909206"></p>
<h2 id="二、手动安装nginx"><a href="#二、手动安装nginx" class="headerlink" title="二、手动安装nginx"></a>二、手动安装nginx</h2><p>提前说一下，我是在centos7下安装的，下面的这些安装都是在centos的root权限下进行的，centos进入root命令：<code>su root</code></p>
<h3 id="安装gcc"><a href="#安装gcc" class="headerlink" title="安装gcc"></a>安装gcc</h3><p><code>yum install gcc-c++</code></p>
<h3 id="安装PCRE-pcre-devel"><a href="#安装PCRE-pcre-devel" class="headerlink" title="安装PCRE pcre-devel"></a>安装PCRE pcre-devel</h3><p><code>yum install -y pcre pcre-devel</code></p>
<h3 id="安装zlib"><a href="#安装zlib" class="headerlink" title="安装zlib"></a>安装zlib</h3><p><code>yum install -y zlib zlib-devel</code></p>
<h3 id="安装openSSL"><a href="#安装openSSL" class="headerlink" title="安装openSSL"></a>安装openSSL</h3><p><code>yum install -y openssl openssl-devel</code></p>
<h3 id="然后就是安装nginx"><a href="#然后就是安装nginx" class="headerlink" title="然后就是安装nginx"></a>然后就是安装nginx</h3><p>这里有两种方式</p>
<ul>
<li><p>第一种是从官网下载：<a href="https://nginx.org/en/download.html" target="_blank" rel="noopener">https://nginx.org/en/download.html</a></p>
</li>
<li><p>第二种是用命令下载<code>wget -c https://nginx.org/download/nginx-1.10.1.tar.gz</code></p>
</li>
</ul>
<p><img src="/img/1563636428367.png" alt="1563636428367"></p>
<h4 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h4><pre><code>tar -zxvf nginx-1.10.1.tar.gz
cd nginx-1.10.1</code></pre><h4 id="使用默认配置"><a href="#使用默认配置" class="headerlink" title="使用默认配置"></a>使用默认配置</h4><p><code>./configure</code></p>
<p><img src="/img/1563636518782.png" alt="1563636518782"></p>
<h4 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h4><pre><code>make
make install</code></pre><p>然后看一下安装到哪个位置的</p>
<p><code>whereis nginx</code></p>
<p>我的是在<code>/usr/local/nginx/sbin/</code>，然后cd进去</p>
<h4 id="启动、停止nginx"><a href="#启动、停止nginx" class="headerlink" title="启动、停止nginx"></a>启动、停止nginx</h4><p>进到sbin目录</p>
<pre><code>./nginx
./nginx -s stop
./nginx -s quit
./nginx -s reload
./nginx -s quit:此方式停止步骤是待nginx进程处理任务完毕进行停止。
./nginx -s stop:此方式相当于先查出nginx进程id再使用kill命令强制杀掉进程。</code></pre><p>查询nginx进程：</p>
<p><code>ps aux|grep nginx</code></p>
<p><img src="/img/1563636722292.png" alt="1563636722292"></p>
<p>这时候，用浏览器访问自己的ip:80(默认)就可以看到</p>
<p><img src="/img/1563636764228.png" alt="1563636764228"></p>
<h4 id="设置开机自启动"><a href="#设置开机自启动" class="headerlink" title="设置开机自启动"></a>设置开机自启动</h4><p>如果每次开机都要去启动一次的话还是比较麻烦的，所以感觉开启自启动比较好</p>
<p>直接在rc.local增加自启动代码就ok</p>
<p><code>vim /etc/rc.local</code>，在最后一行加入<code>/usr/local/nginx/sbin/nginx</code></p>
<p><img src="/img/1563637026692.png" alt="1563637026692"></p>
<p>到此，nginx安装完毕！！</p>
<p>参考链接<a href="https://www.cnblogs.com/zhoading/p/8514050.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhoading/p/8514050.html</a></p>
<h2 id="接下来安装php-fpm"><a href="#接下来安装php-fpm" class="headerlink" title="接下来安装php-fpm"></a>接下来安装php-fpm</h2><h3 id="啥是php-fpm"><a href="#啥是php-fpm" class="headerlink" title="啥是php-fpm"></a>啥是php-fpm</h3><p>对我来说是个新的名词，查一波</p>
<p>php-fpm只是一个php-fastcgi的管理器，为php提供管理服务</p>
<ul>
<li>为什么会出现php-fpm<br>   fpm的出现全部因为php-fastcgi出现，为了很好的管理php-fastcgi而实现的一个程序。</li>
<li>什么是php-fastcgi<br>   php-fastcgi 只是一个cgi程序,只会解析php请求，并且返回结果，不会管理(因此才出现的php-fpm)。</li>
<li>为什么不叫php-cgi<br>   其实在php-fastcgi出现之前是有一个php-cgi存在的,只是它的执行效率低下，因此被php-fastcgi取代。</li>
<li>那fastcgi和cgi有什么区别呢 ？<br>   这区别就大了，当一个服务web-server(nginx)分发过来请求的时候，通过匹配后缀知道该请求是个动态的php请求，会把这个请求转给php。<br>   在cgi的年代，思想比较保守，总是一个请求过来后,去读取php.ini里的基础配置信息，初始化执行环境，每次都要不停的去创建一个进程,读取配置，初始化环境，返回数据，退出进程，久而久之，启动进程的工作变的乏味无趣特别累。<br>   当php来到了5的时代，大家对这种工作方式特别反感，想偷懒的人就拼命的想，我可不可以让cgi一次启动一个主进程(master),让他只读取一次配置，然后在启动多个工作进程(worker),当一个请求来的时候，通过master传递给worker这样就可以避免重复劳动了。于是就产生了fastcgi。</li>
<li>fastcgi这么好，启动的worker用完怎么办 ？<br>   当worker不够的时候，master会通过配置里的信息，动态启动worker，等空闲的时候可以收回worker。</li>
<li>到现在还是没明白php-fpm 是个什么东西<br>   那就先看看php-fpm的全称PHP-FPM (FastCGI Process Manager) is an alternative PHP FastCGI implementation with some additional features useful for sites of any size, especially busier sites.他就是来管理启动一个master进程和多个worker进程的程序。</li>
</ul>
<p>参考<a href="https://www.cnblogs.com/fjping0606/p/9843529.html" target="_blank" rel="noopener">https://www.cnblogs.com/fjping0606/p/9843529.html</a></p>
<h2 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h2><p><img src="/img/1563639244129.png" alt="1563639244129"></p>
<h3 id="连接mysql数据库"><a href="#连接mysql数据库" class="headerlink" title="连接mysql数据库"></a>连接mysql数据库</h3><pre><code>&lt;?php
$connectMysql = mysqli_connect(&#39;localhost&#39;, &#39;root&#39;, &#39;84622130&#39;);

##### 判断是否连接成功

if($connectMysql){

##### 连接成功

echo &#39;MySQL连接成功&#39;;
}
else{
        echo &quot;failed&quot;;
}


?&gt;</code></pre><p><img src="/img/1563861980178.png" alt="1563861980178"></p>
<p>ok。</p>
<p>试试其他语句</p>
<pre><code>&lt;?php
$ipadd=&quot;localhost&quot;;
$usrname=&quot;root&quot;;
$passwd=&quot;84622130&quot;;

$conn = new mysqli($ipadd,$usrname,$passwd);

if ($conn-&gt;connect_error){
        die(&quot;connect falied&quot;);
}
$sql=&quot;create database test_db2&quot;;
if($conn-&gt;query($sql)=== TRUE){
        echo &quot;succssful&quot;;
}
else{
        &quot;error&quot;;
}
$conn-&gt;close();
?&gt;
</code></pre><p><img src="/img/1563866348837.png" alt="1563866348837"></p>
<p><img src="/img/1563866300571.png" alt="1563866300571"></p>
<h2 id="安全加固"><a href="#安全加固" class="headerlink" title="安全加固"></a>安全加固</h2><p>关于mysql方面的加固</p>
<ul>
<li><p>首先我觉得就是不使用默认密码然后还有弱口令密码，然后最好用户名也不使用默认的。</p>
</li>
<li><p>其次，静止远程连接数据库，注释掉 <code>/etc/my.cf中的skip-networking</code></p>
</li>
<li><p>然后，对数据库中的一些重要数据进行加密存储，比如md5,hash系列的加密</p>
</li>
<li><p>为防止用户读取服务器上的本地文件</p>
<p>防止MySQL使用“LOAD DATA LOCAL INFILE”读取主机上的文件，修改</p>
<p><code>/etc/my.cnf  中的set-variable=local-infile=0</code></p>
</li>
<li><p>最后就是，备份，备份很重要，不管是在数据库还是其他地方。</p>
</li>
</ul>

  </article>
  
    
<div class="nexmoe-post-copyright">
<i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
<strong>本文作者：</strong>Gsuhy<br>
<strong>本文链接：</strong><a href="https://www.Gsuhy.cn/2019/07/21/ubuntu配置nginx+php+mysql/" title="https://www.Gsuhy.cn/2019/07/21/ubuntu配置nginx+php+mysql/" target="_blank" rel="noopener">https://www.Gsuhy.cn/2019/07/21/ubuntu配置nginx+php+mysql/</a><br>

  <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可

</div>


  
  <section class="nexmoe-comment">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.min.css">
<div id="gitalk"></div>
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '80b2453b6d5f37ad6225',
        clientSecret: '43e99fa852795c9a7b3eb924b2558c64b84bbdeb',
        id: window.location.pathname,
        repo: 'nexmoe.github.io',
        owner: 'nexmoe',
        admin: 'nexmoe'
    })
    gitalk.render('gitalk')
</script>
</section>
</div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/js/mdui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
 
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>


 
    <script src="https://cdn.jsdelivr.net/npm/smoothscroll-for-websites@1.4.9/SmoothScroll.min.js"></script>


<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script src="/js/app.js?v=1566921627720"></script>
<script src="https://cdn.jsdelivr.net/npm/lazysizes@5.1.0/lazysizes.min.js"></script>


    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/xtaodada/xtaodada.github.io@0.0.2/copy.js"></script>

  





</body>

</html>
