<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="环境准备linux+nginx+php-fpm+mysql为什么选nginx，主要是为后面的nginx+lua的waf做准备这里介绍两种方法配置环境 一、dockerdocker真的非常方便了，个人推荐docker我的是ubuntu18，直接一个命令就ok了sudo apt install docker.io 开启dockersudo systemctl start dockersudo syst">
<meta name="keywords" content="Nginx">
<meta property="og:type" content="article">
<meta property="og:title" content="ubuntu or centos中配置nginx+php+mysql">
<meta property="og:url" content="https://www.Gsuhy.cn/2019/07/21/ubuntu配置nginx+php+mysql/index.html">
<meta property="og:site_name" content="Scorpio">
<meta property="og:description" content="环境准备linux+nginx+php-fpm+mysql为什么选nginx，主要是为后面的nginx+lua的waf做准备这里介绍两种方法配置环境 一、dockerdocker真的非常方便了，个人推荐docker我的是ubuntu18，直接一个命令就ok了sudo apt install docker.io 开启dockersudo systemctl start dockersudo syst">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563694240222.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563694379467.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/123.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563697680398.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563697909206.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563636428367.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563636518782.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563636722292.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563636764228.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563637026692.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563639244129.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563861980178.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563866348837.png">
<meta property="og:image" content="https://www.gsuhy.cn/img/1563866300571.png">
<meta property="og:updated_time" content="2019-08-18T03:30:35.847Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ubuntu or centos中配置nginx+php+mysql">
<meta name="twitter:description" content="环境准备linux+nginx+php-fpm+mysql为什么选nginx，主要是为后面的nginx+lua的waf做准备这里介绍两种方法配置环境 一、dockerdocker真的非常方便了，个人推荐docker我的是ubuntu18，直接一个命令就ok了sudo apt install docker.io 开启dockersudo systemctl start dockersudo syst">
<meta name="twitter:image" content="https://www.gsuhy.cn/img/1563694240222.png">
  <link rel="canonical" href="https://www.Gsuhy.cn/2019/07/21/ubuntu配置nginx+php+mysql/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>ubuntu or centos中配置nginx+php+mysql | Scorpio</title>
  <meta name="generator" content="Hexo 3.9.0">
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Scorpio</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Gsuhy</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
  </ul>

    

</nav>
</div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content page-post-detail">
            

  <div id="posts" class="posts-expand">
    

  <article class="post" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.Gsuhy.cn/2019/07/21/ubuntu配置nginx+php+mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Gsuhy">
      <meta itemprop="description" content="每个人都应该拥有自己的梦想">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Scorpio">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">ubuntu or centos中配置nginx+php+mysql

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-07-21 23:04:30" itemprop="dateCreated datePublished" datetime="2019-07-21T23:04:30+08:00">2019-07-21</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-08-18 11:30:35" itemprop="dateModified" datetime="2019-08-18T11:30:35+08:00">2019-08-18</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Nginx/" itemprop="url" rel="index"><span itemprop="name">Nginx</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h1><p>linux+nginx+php-fpm+mysql<br>为什么选nginx，主要是为后面的nginx+lua的waf做准备<br>这里介绍两种方法配置环境</p>
<h2 id="一、docker"><a href="#一、docker" class="headerlink" title="一、docker"></a>一、docker</h2><p>docker真的非常方便了，个人推荐docker<br>我的是ubuntu18，直接一个命令就ok了<br><code>sudo apt install docker.io</code></p>
<h3 id="开启docker"><a href="#开启docker" class="headerlink" title="开启docker"></a>开启docker</h3><p>sudo systemctl start docker<br>sudo systemctl enable docker</p>
<h3 id="免sudo配置"><a href="#免sudo配置" class="headerlink" title="免sudo配置"></a>免sudo配置</h3><pre><code>sudo addgroup --system docker
sudo adduser $USER docker
newgrp docker</code></pre><h3 id="docker拉取nginx镜像"><a href="#docker拉取nginx镜像" class="headerlink" title="docker拉取nginx镜像"></a>docker拉取nginx镜像</h3><p><code>docker search nginx</code><br>我是直接拉取的官方的，不过可能有点慢，需要换一个源<br>然后直接<code>docker pull nginx</code></p>
<p>拉取完之后可以看看自己本地的docker镜像<img src="/img/1563694240222.png" alt="1563694240222"></p>
<p>然后就跑起来<code>docker run --name runoob-nginx-test -p 8081:80 -d nginx</code></p>
<ul>
<li>runoob-nginx-test是容器的名称</li>
<li>-d 是在后台运行</li>
<li>-p 是端口映射，这里就是把8081映射到80端口</li>
</ul>
<p>然后访问<code>127.0.0.1:8081</code>就行了</p>
<p><img src="/img/1563694379467.png" alt="1563694379467"></p>
<h3 id="安装php"><a href="#安装php" class="headerlink" title="安装php"></a>安装php</h3><p>一样的，还是直接拉取官方的php，不过这里带一个fpm</p>
<p><code>docker pull php:5.6-fpm</code></p>
<p><img src="/img/123.png" alt></p>
<h3 id="nginx-php部署"><a href="#nginx-php部署" class="headerlink" title="nginx+php部署"></a>nginx+php部署</h3><h4 id="启动php"><a href="#启动php" class="headerlink" title="启动php"></a>启动php</h4><p>docker run –name  myphp-fpm -v ~/nginx/www:/www  -d php:5.6-fpm`</p>
<ul>
<li>–name：将容器命名为myphp-fpm</li>
<li>-v：将主机项目中的www目录挂载到容器的/www</li>
</ul>
<h4 id="创建-nginx-conf-conf-d-目录"><a href="#创建-nginx-conf-conf-d-目录" class="headerlink" title="创建~/nginx/conf/conf.d 目录"></a>创建~/nginx/conf/conf.d 目录</h4><p><code>mkdir ~/nginx/conf/conf.d</code></p>
<p>在该目录下添加 <strong>~/nginx/conf/conf.d/runoob-test-php.conf</strong> 文件，内容如下：</p>
<pre><code>server {
    listen       80;
    server_name  localhost;

    location / {
        root   /usr/share/nginx/html;
        index  index.html index.htm index.php;
    }

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }

    location ~ \.php$ {
        fastcgi_pass   php:9000;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME  /www/$fastcgi_script_name;
        include        fastcgi_params;
    }
}</code></pre><h4 id="启动nginx"><a href="#启动nginx" class="headerlink" title="启动nginx"></a>启动nginx</h4><pre><code>docker run --name runoob-php-nginx -p 8083:80 -d \
    -v ~/nginx/www:/usr/share/nginx/html:ro \
    -v ~/nginx/conf/conf.d:/etc/nginx/conf.d:ro \
    --link myphp-fpm:php \
    nginx</code></pre><ul>
<li><strong>-p 8083:80</strong>: 端口映射，把 <strong>nginx</strong> 中的 80 映射到本地的 8083 端口。</li>
<li><strong>~/nginx/www</strong>: 是本地 html 文件的存储目录，/usr/share/nginx/html 是容器内 html 文件的存储目录。</li>
<li><strong>~/nginx/conf/conf.d</strong>: 是本地 nginx 配置文件的存储目录，/etc/nginx/conf.d 是容器内 nginx 配置文件的存储目录。</li>
<li><strong>–link myphp-fpm:php</strong>: 把 <strong>myphp-fpm</strong> 的网络并入 <strong>nginx</strong>，并通过修改 <strong>nginx</strong> 的 /etc/hosts，把域名 <strong>php</strong> 映射成 127.0.0.1，让 nginx 通过 php:9000 访问 php-fpm。</li>
</ul>
<p>然后就是在/www目录下创建一个php文件，里面放上phpinfo</p>
<p><img src="/img/1563697680398.png" alt="1563697680398"></p>
<p>这就部署成功！！！！</p>
<h3 id="部署mysql"><a href="#部署mysql" class="headerlink" title="部署mysql"></a>部署mysql</h3><p>其实大致上是一样的都是通过docker拉取，细节就不多说了，详情可以参考菜鸟上的教程<a href="https://www.runoob.com/docker/docker-install-mysql.html" target="_blank" rel="noopener">https://www.runoob.com/docker/docker-install-mysql.html</a></p>
<p>最后附上今天安装的所有docker<img src="/img/1563697909206.png" alt="1563697909206"></p>
<h2 id="二、手动安装nginx"><a href="#二、手动安装nginx" class="headerlink" title="二、手动安装nginx"></a>二、手动安装nginx</h2><p>提前说一下，我是在centos7下安装的，下面的这些安装都是在centos的root权限下进行的，centos进入root命令：<code>su root</code></p>
<h3 id="安装gcc"><a href="#安装gcc" class="headerlink" title="安装gcc"></a>安装gcc</h3><p><code>yum install gcc-c++</code></p>
<h3 id="安装PCRE-pcre-devel"><a href="#安装PCRE-pcre-devel" class="headerlink" title="安装PCRE pcre-devel"></a>安装PCRE pcre-devel</h3><p><code>yum install -y pcre pcre-devel</code></p>
<h3 id="安装zlib"><a href="#安装zlib" class="headerlink" title="安装zlib"></a>安装zlib</h3><p><code>yum install -y zlib zlib-devel</code></p>
<h3 id="安装openSSL"><a href="#安装openSSL" class="headerlink" title="安装openSSL"></a>安装openSSL</h3><p><code>yum install -y openssl openssl-devel</code></p>
<h3 id="然后就是安装nginx"><a href="#然后就是安装nginx" class="headerlink" title="然后就是安装nginx"></a>然后就是安装nginx</h3><p>这里有两种方式</p>
<ul>
<li><p>第一种是从官网下载：<a href="https://nginx.org/en/download.html" target="_blank" rel="noopener">https://nginx.org/en/download.html</a></p>
</li>
<li><p>第二种是用命令下载<code>wget -c https://nginx.org/download/nginx-1.10.1.tar.gz</code></p>
</li>
</ul>
<p><img src="/img/1563636428367.png" alt="1563636428367"></p>
<h4 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h4><pre><code>tar -zxvf nginx-1.10.1.tar.gz
cd nginx-1.10.1</code></pre><h4 id="使用默认配置"><a href="#使用默认配置" class="headerlink" title="使用默认配置"></a>使用默认配置</h4><p><code>./configure</code></p>
<p><img src="/img/1563636518782.png" alt="1563636518782"></p>
<h4 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h4><pre><code>make
make install</code></pre><p>然后看一下安装到哪个位置的</p>
<p><code>whereis nginx</code></p>
<p>我的是在<code>/usr/local/nginx/sbin/</code>，然后cd进去</p>
<h4 id="启动、停止nginx"><a href="#启动、停止nginx" class="headerlink" title="启动、停止nginx"></a>启动、停止nginx</h4><p>进到sbin目录</p>
<pre><code>./nginx
./nginx -s stop
./nginx -s quit
./nginx -s reload
./nginx -s quit:此方式停止步骤是待nginx进程处理任务完毕进行停止。
./nginx -s stop:此方式相当于先查出nginx进程id再使用kill命令强制杀掉进程。</code></pre><p>查询nginx进程：</p>
<p><code>ps aux|grep nginx</code></p>
<p><img src="/img/1563636722292.png" alt="1563636722292"></p>
<p>这时候，用浏览器访问自己的ip:80(默认)就可以看到</p>
<p><img src="/img/1563636764228.png" alt="1563636764228"></p>
<h4 id="设置开机自启动"><a href="#设置开机自启动" class="headerlink" title="设置开机自启动"></a>设置开机自启动</h4><p>如果每次开机都要去启动一次的话还是比较麻烦的，所以感觉开启自启动比较好</p>
<p>直接在rc.local增加自启动代码就ok</p>
<p><code>vim /etc/rc.local</code>，在最后一行加入<code>/usr/local/nginx/sbin/nginx</code></p>
<p><img src="/img/1563637026692.png" alt="1563637026692"></p>
<p>到此，nginx安装完毕！！</p>
<p>参考链接<a href="https://www.cnblogs.com/zhoading/p/8514050.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhoading/p/8514050.html</a></p>
<h2 id="接下来安装php-fpm"><a href="#接下来安装php-fpm" class="headerlink" title="接下来安装php-fpm"></a>接下来安装php-fpm</h2><h3 id="啥是php-fpm"><a href="#啥是php-fpm" class="headerlink" title="啥是php-fpm"></a>啥是php-fpm</h3><p>对我来说是个新的名词，查一波</p>
<p>php-fpm只是一个php-fastcgi的管理器，为php提供管理服务</p>
<ul>
<li>为什么会出现php-fpm<br>   fpm的出现全部因为php-fastcgi出现，为了很好的管理php-fastcgi而实现的一个程序。</li>
<li>什么是php-fastcgi<br>   php-fastcgi 只是一个cgi程序,只会解析php请求，并且返回结果，不会管理(因此才出现的php-fpm)。</li>
<li>为什么不叫php-cgi<br>   其实在php-fastcgi出现之前是有一个php-cgi存在的,只是它的执行效率低下，因此被php-fastcgi取代。</li>
<li>那fastcgi和cgi有什么区别呢 ？<br>   这区别就大了，当一个服务web-server(nginx)分发过来请求的时候，通过匹配后缀知道该请求是个动态的php请求，会把这个请求转给php。<br>   在cgi的年代，思想比较保守，总是一个请求过来后,去读取php.ini里的基础配置信息，初始化执行环境，每次都要不停的去创建一个进程,读取配置，初始化环境，返回数据，退出进程，久而久之，启动进程的工作变的乏味无趣特别累。<br>   当php来到了5的时代，大家对这种工作方式特别反感，想偷懒的人就拼命的想，我可不可以让cgi一次启动一个主进程(master),让他只读取一次配置，然后在启动多个工作进程(worker),当一个请求来的时候，通过master传递给worker这样就可以避免重复劳动了。于是就产生了fastcgi。</li>
<li>fastcgi这么好，启动的worker用完怎么办 ？<br>   当worker不够的时候，master会通过配置里的信息，动态启动worker，等空闲的时候可以收回worker。</li>
<li>到现在还是没明白php-fpm 是个什么东西<br>   那就先看看php-fpm的全称PHP-FPM (FastCGI Process Manager) is an alternative PHP FastCGI implementation with some additional features useful for sites of any size, especially busier sites.他就是来管理启动一个master进程和多个worker进程的程序。</li>
</ul>
<p>参考<a href="https://www.cnblogs.com/fjping0606/p/9843529.html" target="_blank" rel="noopener">https://www.cnblogs.com/fjping0606/p/9843529.html</a></p>
<h2 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h2><p><img src="/img/1563639244129.png" alt="1563639244129"></p>
<h3 id="连接mysql数据库"><a href="#连接mysql数据库" class="headerlink" title="连接mysql数据库"></a>连接mysql数据库</h3><pre><code>&lt;?php
$connectMysql = mysqli_connect(&#39;localhost&#39;, &#39;root&#39;, &#39;84622130&#39;);

##### 判断是否连接成功

if($connectMysql){

##### 连接成功

echo &#39;MySQL连接成功&#39;;
}
else{
        echo &quot;failed&quot;;
}


?&gt;</code></pre><p><img src="/img/1563861980178.png" alt="1563861980178"></p>
<p>ok。</p>
<p>试试其他语句</p>
<pre><code>&lt;?php
$ipadd=&quot;localhost&quot;;
$usrname=&quot;root&quot;;
$passwd=&quot;84622130&quot;;

$conn = new mysqli($ipadd,$usrname,$passwd);

if ($conn-&gt;connect_error){
        die(&quot;connect falied&quot;);
}
$sql=&quot;create database test_db2&quot;;
if($conn-&gt;query($sql)=== TRUE){
        echo &quot;succssful&quot;;
}
else{
        &quot;error&quot;;
}
$conn-&gt;close();
?&gt;
</code></pre><p><img src="/img/1563866348837.png" alt="1563866348837"></p>
<p><img src="/img/1563866300571.png" alt="1563866300571"></p>
<h2 id="安全加固"><a href="#安全加固" class="headerlink" title="安全加固"></a>安全加固</h2><p>关于mysql方面的加固</p>
<ul>
<li><p>首先我觉得就是不使用默认密码然后还有弱口令密码，然后最好用户名也不使用默认的。</p>
</li>
<li><p>其次，静止远程连接数据库，注释掉 <code>/etc/my.cf中的skip-networking</code></p>
</li>
<li><p>然后，对数据库中的一些重要数据进行加密存储，比如md5,hash系列的加密</p>
</li>
<li><p>为防止用户读取服务器上的本地文件</p>
<p>防止MySQL使用“LOAD DATA LOCAL INFILE”读取主机上的文件，修改</p>
<p><code>/etc/my.cnf  中的set-variable=local-infile=0</code></p>
</li>
<li><p>最后就是，备份，备份很重要，不管是在数据库还是其他地方。</p>
</li>
</ul>

    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/Nginx/" rel="tag"># Nginx</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2019/07/20/sqli-labs训练(11-20)/" rel="next" title="sqli-labs训练（less11-20）">
                  <i class="fa fa-chevron-left"></i> sqli-labs训练（less11-20）
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2019/07/24/内网渗透/" rel="prev" title="内网渗透思维导图">
                  内网渗透思维导图 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc" data-target="post-toc-wrap">
          文章目录
        </li>
        <li class="sidebar-nav-overview" data-target="site-overview-wrap">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#环境准备"><span class="nav-number">1.</span> <span class="nav-text">环境准备</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#一、docker"><span class="nav-number">1.1.</span> <span class="nav-text">一、docker</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#开启docker"><span class="nav-number">1.1.1.</span> <span class="nav-text">开启docker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#免sudo配置"><span class="nav-number">1.1.2.</span> <span class="nav-text">免sudo配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#docker拉取nginx镜像"><span class="nav-number">1.1.3.</span> <span class="nav-text">docker拉取nginx镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装php"><span class="nav-number">1.1.4.</span> <span class="nav-text">安装php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nginx-php部署"><span class="nav-number">1.1.5.</span> <span class="nav-text">nginx+php部署</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#启动php"><span class="nav-number">1.1.5.1.</span> <span class="nav-text">启动php</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建-nginx-conf-conf-d-目录"><span class="nav-number">1.1.5.2.</span> <span class="nav-text">创建~/nginx/conf/conf.d 目录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#启动nginx"><span class="nav-number">1.1.5.3.</span> <span class="nav-text">启动nginx</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#部署mysql"><span class="nav-number">1.1.6.</span> <span class="nav-text">部署mysql</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、手动安装nginx"><span class="nav-number">1.2.</span> <span class="nav-text">二、手动安装nginx</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装gcc"><span class="nav-number">1.2.1.</span> <span class="nav-text">安装gcc</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装PCRE-pcre-devel"><span class="nav-number">1.2.2.</span> <span class="nav-text">安装PCRE pcre-devel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装zlib"><span class="nav-number">1.2.3.</span> <span class="nav-text">安装zlib</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装openSSL"><span class="nav-number">1.2.4.</span> <span class="nav-text">安装openSSL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#然后就是安装nginx"><span class="nav-number">1.2.5.</span> <span class="nav-text">然后就是安装nginx</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#解压"><span class="nav-number">1.2.5.1.</span> <span class="nav-text">解压</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用默认配置"><span class="nav-number">1.2.5.2.</span> <span class="nav-text">使用默认配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#编译安装"><span class="nav-number">1.2.5.3.</span> <span class="nav-text">编译安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#启动、停止nginx"><span class="nav-number">1.2.5.4.</span> <span class="nav-text">启动、停止nginx</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#设置开机自启动"><span class="nav-number">1.2.5.5.</span> <span class="nav-text">设置开机自启动</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#接下来安装php-fpm"><span class="nav-number">1.3.</span> <span class="nav-text">接下来安装php-fpm</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#啥是php-fpm"><span class="nav-number">1.3.1.</span> <span class="nav-text">啥是php-fpm</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装mysql"><span class="nav-number">1.4.</span> <span class="nav-text">安装mysql</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#连接mysql数据库"><span class="nav-number">1.4.1.</span> <span class="nav-text">连接mysql数据库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安全加固"><span class="nav-number">1.5.</span> <span class="nav-text">安全加固</span></a></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Gsuhy</p>
  <div class="site-description motion-element" itemprop="description">每个人都应该拥有自己的梦想</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">31</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>



        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Gsuhy</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.3.0</div>

        












        
      </div>
    </footer>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.3.0"></script><script src="/js/motion.js?v=7.3.0"></script>
<script src="/js/schemes/muse.js?v=7.3.0"></script>
<script src="/js/next-boot.js?v=7.3.0"></script>



  





















  

  

  

</body>
</html>
